<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passaporte Rio - Caique & Daniela</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚úàÔ∏è</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Passaporte Rio">
    <meta name="theme-color" content="#E67E22">
    
    <!-- Manifest -->
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Passaporte%20Rio%20-%20Caique%20%26%20Daniela%22,%22short_name%22:%22Passaporte%20Rio%22,%22description%22:%22Passaporte%20digital%20para%20nossa%20viagem%20ao%20Rio%22,%22start_url%22:%22/%22,%22display%22:%22standalone%22,%22background_color%22:%22#1A2A44%22,%22theme_color%22:%22#E67E22%22,%22orientation%22:%22portrait%22,%22icons%22:[{%22src%22:%22data:image/svg+xml,%3Csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20viewBox=%270%200%20512%20512%27%3E%3Crect%20width=%27512%27%20height=%27512%27%20rx=%27100%27%20fill=%27%231A2A44%27/%3E%3Ccircle%20cx=%27256%27%20cy=%27256%27%20r=%27150%27%20fill=%27%23E67E22%27%20stroke=%27%23F1C40F%27%20stroke-width=%2720%27/%3E%3Cpath%20d=%27M256%20150%20L256%20362%20M150%20256%20L362%20256%27%20stroke=%27%23F1C40F%27%20stroke-width=%2730%27%20stroke-linecap=%27round%27/%3E%3Ctext%20x=%27256%27%20y=%27280%27%20font-family=%27Arial%27%20font-size=%2780%27%20fill=%27white%27%20text-anchor=%27middle%27%3EBR%3C/text%3E%3C/svg%3E%22,%22sizes%22:%22512x512%22,%22type%22:%22image/svg+xml%22}]}">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:ital,wght@1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #F8F5F0;
            scroll-behavior: smooth; 
            overflow-x: hidden;
        }
        .font-serif-italic { font-family: 'Playfair Display', serif; font-style: italic; }
        .tab-active { 
            border-bottom: 3px solid #E67E22; 
            color: #E67E22; 
            font-weight: 700;
            position: relative;
        }
        .tab-active::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #E67E22;
        }
        .dot-line::before {
            content: ''; 
            position: absolute; 
            left: 20px; 
            top: 0; 
            bottom: 0;
            width: 2px; 
            border-left: 2px dashed #F1C40F; 
            z-index: 0;
        }
        .preserve-3d { transform-style: preserve-3d; }
        .rotate-y-open { transform: rotateY(-110deg); }
        .star-active { color: #F1C40F; fill: #F1C40F; }
        .star-inactive { color: #D1D5DB; }
        .card-enter { 
            animation: slideUp 0.5s ease-out forwards; 
            transition: all 0.3s ease;
        }
        .card-enter:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(230, 126, 34, 0.1);
        }
        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        @keyframes stamp {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            100% { transform: scale(1) rotate(8deg); opacity: 1; }
        }
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        @keyframes notification {
            0% { transform: translateY(100%); opacity: 0; }
            10% { transform: translateY(0); opacity: 1; }
            90% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(100%); opacity: 0; }
        }
        .float-animation { animation: float 6s ease-in-out infinite; }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .passport-stamp {
            background: radial-gradient(circle at 30% 30%, #E67E22, #d35400);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
            animation: stamp 0.8s ease-out forwards;
            animation-delay: 0.5s;
            opacity: 0;
        }
        .passport-emboss {
            position: relative;
            overflow: hidden;
        }
        .passport-emboss::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 1px,
                    rgba(255, 255, 255, 0.05) 1px,
                    rgba(255, 255, 255, 0.05) 2px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 1px,
                    rgba(255, 255, 255, 0.05) 1px,
                    rgba(255, 255, 255, 0.05) 2px
                );
            pointer-events: none;
            z-index: 1;
        }
        .passport-shine {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 70%
            );
            animation: shine 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 2;
        }
        .ripple {
            position: relative;
            overflow: hidden;
        }
        .ripple:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        .ripple:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        @keyframes ripple {
            0% { transform: scale(0, 0); opacity: 0.5; }
            100% { transform: scale(50, 50); opacity: 0; }
        }
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #E67E22 50%, transparent);
            margin: 40px 0;
        }
        .passport-corner {
            position: absolute;
            width: 20px;
            height: 20px;
        }
        .passport-corner-tl {
            top: 15px;
            left: 15px;
            border-top: 3px solid #E67E22;
            border-left: 3px solid #E67E22;
        }
        .passport-corner-tr {
            top: 15px;
            right: 15px;
            border-top: 3px solid #E67E22;
            border-right: 3px solid #E67E22;
        }
        .passport-corner-bl {
            bottom: 15px;
            left: 15px;
            border-bottom: 3px solid #E67E22;
            border-left: 3px solid #E67E22;
        }
        .passport-corner-br {
            bottom: 15px;
            right: 15px;
            border-bottom: 3px solid #E67E22;
            border-right: 3px solid #E67E22;
        }
        .passport-stitching {
            position: absolute;
            width: calc(100% - 30px);
            height: 2px;
            background: repeating-linear-gradient(
                90deg,
                #F1C40F,
                #F1C40F 3px,
                #E67E22 3px,
                #E67E22 6px
            );
            left: 15px;
        }
        .passport-stitching-top {
            top: 40px;
        }
        .passport-stitching-bottom {
            bottom: 40px;
        }
        .passport-gold-text {
            color: #F1C40F;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.3em;
        }
        .passport-crest {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto;
        }
        .passport-crest::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at center, #1A2A44 40%, transparent 41%),
                radial-gradient(circle at center, #E67E22 60%, transparent 61%);
            border-radius: 50%;
        }
        .passport-crest::after {
            content: 'BR';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 20px;
            letter-spacing: 2px;
        }
        .passport-title {
            font-size: 28px;
            letter-spacing: 0.4em;
            font-weight: 700;
        }
        .passport-subtitle {
            font-size: 10px;
            letter-spacing: 0.3em;
        }
        .passport-names {
            font-size: 18px;
            letter-spacing: 0.1em;
        }
        .passport-info-label {
            font-size: 8px;
            letter-spacing: 0.2em;
        }
        .passport-info-value {
            font-size: 11px;
            letter-spacing: 0.1em;
        }
        .remove-btn {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .card-enter:hover .remove-btn {
            opacity: 1;
        }
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: notification 3s ease forwards;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .notification.success { background: linear-gradient(135deg, #10b981, #34d399); }
        .notification.warning { background: linear-gradient(135deg, #f59e0b, #fbbf24); }
        .notification.error { background: linear-gradient(135deg, #ef4444, #f87171); }
        .offline-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #f59e0b;
            color: white;
            text-align: center;
            padding: 8px;
            font-size: 14px;
            z-index: 1001;
            display: none;
        }
        .memory-img {
            transition: transform 0.3s ease;
        }
        .memory-img:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="text-[#2C3E50] overflow-x-hidden">
    <!-- Banner de Modo Offline -->
    <div id="offline-banner" class="offline-banner">
        <i class="fas fa-wifi-slash mr-2"></i> Modo offline ativado - Algumas funcionalidades podem estar limitadas
    </div>

    <!-- Bot√£o de Instala√ß√£o PWA -->
    <button id="installBtn" class="fixed bottom-6 right-6 bg-gradient-to-r from-[#E67E22] to-[#F1C40F] text-white px-6 py-3 rounded-full font-bold shadow-xl hover:shadow-2xl transition-all z-50 hidden">
        <i class="fas fa-download mr-2"></i>Instalar App
    </button>

    <!-- Tela do Passaporte -->
    <div id="passport-overlay" class="fixed inset-0 z-[100] flex items-center justify-center bg-[#1a2a44]">
        <div onclick="openPassport()" class="relative w-[90vw] max-w-[400px] h-[600px] cursor-pointer perspective-[1500px] ripple">
            <!-- Efeito de brilho -->
            <div class="passport-shine"></div>
            
            <div id="passport-cover" class="relative w-full h-full preserve-3d transition-transform duration-1000 origin-left bg-gradient(145deg, #0c1124, #1a2a44) rounded-r-2xl shadow-[0_25px_50px_rgba(0,0,0,0.5)] flex flex-col items-center justify-center p-8 border-l-[10px] border-amber-600 passport-emboss">
                
                <!-- Cantos decorativos -->
                <div class="passport-corner passport-corner-tl"></div>
                <div class="passport-corner passport-corner-tr"></div>
                <div class="passport-corner passport-corner-bl"></div>
                <div class="passport-corner passport-corner-br"></div>
                
                <!-- Costura decorativa -->
                <div class="passport-stitching passport-stitching-top"></div>
                <div class="passport-stitching passport-stitching-bottom"></div>
                
                <div class="w-full h-full border-2 border-amber-600/30 rounded-xl flex flex-col items-center justify-center text-center relative z-10 bg-gradient(145deg, rgba(26,42,68,0.95), rgba(12,17,36,0.95))">
                    
                    <!-- Bras√£o do passaporte -->
                    <div class="passport-crest mb-6"></div>
                    
                    <!-- T√≠tulo PASSPORTE -->
                    <div class="mb-4">
                        <h1 class="text-amber-500 font-bold uppercase mb-2 passport-title passport-gold-text">
                            P A S S P O R T E
                        </h1>
                        <div class="w-40 h-[1px] bg-gradient(90deg, transparent, #F1C40F, #E67E22, transparent) mx-auto rounded-full mb-3"></div>
                    </div>
                    
                    <!-- Rep√∫blica Federativa do Brasil -->
                    <div class="mb-8">
                        <p class="text-gray-300 uppercase tracking-widest mb-1 passport-subtitle">REP√öBLICA FEDERATIVA DO BRASIL</p>
                        <p class="text-gray-400 uppercase tracking-widest passport-subtitle">PASSAPORTE ELETR√îNICO</p>
                    </div>
                    
                    <!-- Linha divis√≥ria -->
                    <div class="w-48 h-px bg-gradient(90deg, transparent, rgba(241,196,15,0.3), rgba(230,126,34,0.3), transparent) mx-auto mb-6"></div>
                    
                    <!-- Nomes dos titulares -->
                    <div class="mb-8">
                        <div class="bg-gradient(90deg, rgba(241,196,15,0.1), rgba(230,126,34,0.1)) p-4 rounded-lg border border-amber-600/30 mb-3">
                            <p class="text-amber-100 font-bold uppercase mb-2 passport-names">
                                CAIQUE OLIVEIRA
                            </p>
                            <p class="text-amber-100 font-bold uppercase passport-names">
                                DANIELA SILVA
                            </p>
                        </div>
                        <p class="text-gray-300 text-sm font-serif-italic tracking-wide">
                            Viajantes em Miss√£o Rom√¢ntica
                        </p>
                    </div>
                    
                    <!-- Informa√ß√µes do passaporte -->
                    <div class="mb-8 w-full px-8">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="text-left">
                                <p class="text-gray-400 uppercase tracking-widest mb-1 passport-info-label">N¬∫ DO PASSAPORTE</p>
                                <p class="text-amber-100 font-mono passport-info-value">
                                    BR ‚Ä¢ C&D ‚Ä¢ 2026<br>
                                    ‚Ä¢ RIO
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-gray-400 uppercase tracking-widest mb-1 passport-info-label">VALIDADE</p>
                                <p class="text-amber-100 passport-info-value">
                                    06-08 JAN 2026
                                </p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div class="text-left">
                                <p class="text-gray-400 uppercase tracking-widest mb-1 passport-info-label">DATA DE EMISS√ÉO</p>
                                <p class="text-amber-100 passport-info-value">01 JAN 2026</p>
                            </div>
                            <div class="text-right">
                                <p class="text-gray-400 uppercase tracking-widest mb-1 passport-info-label">AUTORIDADE</p>
                                <p class="text-amber-100 passport-info-value">AMOR ETERNO</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Carimbo de destino -->
                    <div class="mb-6 relative">
                        <div class="passport-stamp w-20 h-20 rounded-full flex items-center justify-center text-sm font-bold rotate-8">
                            <div class="transform -rotate-8 text-center">
                                <div class="font-bold text-lg">RIO</div>
                                <div class="text-[10px] mt-1">DESTINO</div>
                                <div class="text-[8px] mt-1">06-08/01/26</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Instru√ß√£o para abrir -->
                    <div class="mt-4">
                        <div class="flex items-center justify-center gap-2">
                            <div class="w-5 h-5 rounded-full bg-amber-500 flex items-center justify-center animate-bounce">
                                <i class="fas fa-hand-point-up text-white text-xs"></i>
                            </div>
                            <p class="text-amber-500/70 text-xs uppercase tracking-[0.3em] font-semibold pulse-glow">
                                Clique para abrir
                            </p>
                        </div>
                    </div>
                    
                    <!-- Texto pequeno de rodap√© -->
                    <p class="absolute bottom-4 text-amber-500/20 text-[8px] uppercase tracking-[0.4em]">
                        DOCUMENTO DE VIAGEM DIGITAL
                    </p>
                    
                    <!-- C√≥digo de barras decorativo -->
                    <div class="absolute bottom-12 left-4 right-4 h-6 bg-gradient(90deg, 
                        #000 2px, #fff 2px, #fff 4px, 
                        #000 4px, #000 6px, #fff 6px, #fff 8px,
                        #000 8px, #000 10px, #fff 10px, #fff 12px,
                        #000 12px, #000 14px, #fff 14px, #fff 16px,
                        #000 16px, #000 18px, #fff 18px, #fff 20px
                    ) opacity-20"></div>
                </div>
                
                <!-- Selo hologr√°fico -->
                <div class="absolute top-6 right-6 w-12 h-12 bg-gradient(135deg, 
                    rgba(241,196,15,0.8) 0%, 
                    rgba(230,126,34,0.6) 50%, 
                    rgba(241,196,15,0.8) 100%
                ) rounded-full flex items-center justify-center shadow-lg border border-amber-300/30">
                    <i class="fas fa-globe-americas text-white text-lg"></i>
                </div>
                
                <!-- Texto lateral "BRASIL" -->
                <div class="absolute left-4 top-1/2 transform -translate-y-1/2 -rotate-90">
                    <p class="text-amber-500/20 text-sm uppercase tracking-widest font-bold">BRASIL</p>
                </div>
            </div>
        </div>
        
        <!-- Elementos decorativos flutuantes -->
        <div class="absolute top-10 left-10 text-white/10">
            <i class="fas fa-plane-departure text-4xl float-animation"></i>
        </div>
        <div class="absolute bottom-10 right-10 text-white/10">
            <i class="fas fa-umbrella-beach text-4xl float-animation" style="animation-delay: 1s"></i>
        </div>
        <div class="absolute top-1/4 right-10 text-white/10">
            <i class="fas fa-heart text-3xl float-animation" style="animation-delay: 0.5s"></i>
        </div>
        <div class="absolute bottom-1/4 left-10 text-white/10">
            <i class="fas fa-map-marker-alt text-3xl float-animation" style="animation-delay: 1.5s"></i>
        </div>
    </div>

    <!-- APLICA√á√ÉO PRINCIPAL -->
    <div id="main-app" class="hidden opacity-0 transition-all duration-1000">
        <header class="bg-[#1A2A44] text-white py-20 text-center relative shadow-2xl overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-amber-600"></div>
            
            <div class="relative z-10">
                <p class="font-serif-italic text-amber-500 text-2xl mb-4 flex items-center justify-center gap-3">
                    <i class="fas fa-heart text-xl"></i> Caique & Daniela em <i class="fas fa-heart text-xl"></i>
                </p>
                <h1 class="text-5xl md:text-7xl font-extrabold tracking-[0.1em] uppercase mb-6 text-amber-500">Rio de Janeiro</h1>
                
                <div class="flex items-center justify-center gap-8 mt-12">
                    <div class="text-center">
                        <div class="text-amber-500 font-bold text-3xl">06</div>
                        <div class="text-gray-400 text-xs uppercase tracking-widest">JAN</div>
                    </div>
                    <div class="w-16 h-px bg-amber-600/50"></div>
                    <div class="text-center">
                        <div class="text-amber-500 font-bold text-3xl">07</div>
                        <div class="text-gray-400 text-xs uppercase tracking-widest">JAN</div>
                    </div>
                    <div class="w-16 h-px bg-amber-600/50"></div>
                    <div class="text-center">
                        <div class="text-amber-500 font-bold text-3xl">08</div>
                        <div class="text-gray-400 text-xs uppercase tracking-widest">JAN</div>
                    </div>
                </div>
                
                <div class="mt-12 flex items-center justify-center gap-6">
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 flex items-center gap-3">
                        <i class="fas fa-sun text-amber-500 text-xl"></i>
                        <div>
                            <div class="text-sm font-bold">30¬∞C</div>
                            <div class="text-xs opacity-70">Ensolarado</div>
                        </div>
                    </div>
                    <div class="bg-white/10 backdrop-blur-sm rounded-full px-6 py-3 flex items-center gap-3">
                        <i class="fas fa-umbrella-beach text-amber-500 text-xl"></i>
                        <div>
                            <div class="text-sm font-bold">PRAIA</div>
                            <div class="text-xs opacity-70">Ver√£o no Rio</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="absolute bottom-0 left-0 w-full h-2 bg-amber-600"></div>
        </header>

        <nav class="bg-white border-b sticky top-0 z-50 shadow-lg">
            <div class="max-w-6xl mx-auto px-4 flex items-center justify-between">
                <div class="flex space-x-6 md:space-x-12" id="tab-list">
                    <button onclick="switchTab('day-06')" id="tab-06" class="py-6 text-xs font-bold uppercase tracking-widest tab-active flex flex-col items-center gap-1">
                        <span>06 JAN</span>
                        <span class="text-[10px] text-gray-500 font-normal">Chegada</span>
                    </button>
                    <button onclick="switchTab('day-07')" id="tab-07" class="py-6 text-xs font-bold uppercase tracking-widest text-gray-400 flex flex-col items-center gap-1">
                        <span>07 JAN</span>
                        <span class="text-[10px] text-gray-500 font-normal">Aventura</span>
                    </button>
                    <button onclick="switchTab('day-08')" id="tab-08" class="py-6 text-xs font-bold uppercase tracking-widest text-gray-400 flex flex-col items-center gap-1">
                        <span>08 JAN</span>
                        <span class="text-[10px] text-gray-500 font-normal">Cultura</span>
                    </button>
                </div>
                <button onclick="toggleEdit()" id="edit-btn" class="bg-[#FEF5E7] text-[#E67E22] px-8 py-3 rounded-full font-bold text-xs shadow-lg hover:shadow-xl hover:scale-105 transition-all ripple">
                    <i class="fas fa-edit mr-2"></i>Editar
                </button>
            </div>
        </nav>

        <main class="max-w-6xl mx-auto px-4 py-12">
            <div class="mb-16 text-center">
                <h2 class="text-4xl font-bold mb-4 text-[#1a2a44]">Nosso Roteiro</h2>
                <p class="text-gray-500 max-w-2xl mx-auto">Cada momento planejado com carinho para transformar esses dias em mem√≥rias eternas.</p>
            </div>
            
            <div id="day-container" class="space-y-12"></div>

            <div class="section-divider"></div>

            <!-- Se√ß√£o de Mem√≥rias da Viagem -->
            <section class="mb-20">
                <h2 class="text-3xl font-bold mb-10 text-center text-[#1a2a44]">üì∏ Mem√≥rias da Viagem</h2>
                
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8">
                    <!-- Upload de fotos -->
                    <div class="memory-item rounded-2xl overflow-hidden h-48 bg-gray-100 border-2 border-dashed border-amber-200 flex flex-col items-center justify-center cursor-pointer hover:border-amber-400 transition-all relative group" onclick="document.getElementById('memory-upload').click()">
                        <i class="fas fa-plus text-amber-400 text-3xl mb-3"></i>
                        <p class="text-amber-500 font-semibold">Adicionar Foto</p>
                        <p class="text-amber-400 text-xs mt-2">Clique para adicionar</p>
                        <input type="file" accept="image/*" class="hidden" id="memory-upload" onchange="addMemoryPhoto(this)">
                    </div>
                    
                    <!-- Placeholders -->
                    <div class="memory-placeholder rounded-2xl overflow-hidden h-48 bg-gradient-to-br from-amber-100 to-orange-100 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-camera text-amber-500 text-3xl mb-3"></i>
                            <p class="text-amber-600 font-semibold">Suas fotos</p>
                            <p class="text-amber-500 text-xs">aparecer√£o aqui</p>
                        </div>
                    </div>
                    <div class="memory-placeholder rounded-2xl overflow-hidden h-48 bg-gradient-to-br from-blue-100 to-cyan-100 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-heart text-amber-500 text-3xl mb-3"></i>
                            <p class="text-amber-600 font-semibold">Momentos</p>
                            <p class="text-amber-500 text-xs">especiais</p>
                        </div>
                    </div>
                </div>
                
                <!-- Galeria de fotos -->
                <div id="memories-gallery" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            </section>

            <!-- Di√°rio da Viagem -->
            <section class="mb-20 bg-white p-8 rounded-3xl shadow-xl border border-amber-100">
                <h2 class="text-3xl font-bold mb-6 text-[#1a2a44] flex items-center gap-3">
                    <i class="fas fa-book text-amber-500"></i>
                    üìñ Di√°rio da Viagem
                </h2>
                
                <div class="mb-6">
                    <textarea id="travel-diary" class="w-full h-48 p-4 bg-amber-50/50 rounded-2xl border border-amber-200 focus:border-amber-400 outline-none transition-all resize-none" placeholder="Escreva suas lembran√ßas, sentimentos e momentos especiais desta viagem..."></textarea>
                </div>
                
                <div class="flex justify-between items-center">
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-save mr-2"></i>
                        Salvo automaticamente
                    </div>
                    <button onclick="saveDiary()" class="bg-amber-500 text-white px-6 py-2 rounded-full font-bold hover:bg-amber-600 transition-all">
                        <i class="fas fa-save mr-2"></i>Salvar Agora
                    </button>
                </div>
            </section>

            <!-- Mapa Interativo -->
            <section class="mb-20">
                <h2 class="text-3xl font-bold mb-10 text-center text-[#1a2a44]">üó∫Ô∏è Nosso Mapa</h2>
                
                <div class="bg-white rounded-3xl shadow-xl p-6 border border-amber-100">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Mapa simplificado -->
                        <div class="md:col-span-2 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl p-6 h-64 flex items-center justify-center relative">
                            <!-- Pontos no mapa -->
                            <div class="absolute w-6 h-6 bg-amber-500 rounded-full top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 shadow-lg border-2 border-white" title="Urca">
                                <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap text-xs font-bold text-amber-700">Urca</div>
                            </div>
                            <div class="absolute w-6 h-6 bg-amber-500 rounded-full top-1/3 right-1/3 transform -translate-x-1/2 -translate-y-1/2 shadow-lg border-2 border-white" title="Cristo">
                                <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap text-xs font-bold text-amber-700">Cristo</div>
                            </div>
                            <div class="absolute w-6 h-6 bg-amber-500 rounded-full bottom-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 shadow-lg border-2 border-white" title="Copacabana">
                                <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap text-xs font-bold text-amber-700">Copacabana</div>
                            </div>
                            <div class="absolute w-6 h-6 bg-amber-500 rounded-full bottom-1/3 right-1/4 transform -translate-x-1/2 -translate-y-1/2 shadow-lg border-2 border-white" title="Lapa">
                                <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 whitespace-nowrap text-xs font-bold text-amber-700">Lapa</div>
                            </div>
                            
                            <div class="text-center">
                                <i class="fas fa-map-marked-alt text-amber-500 text-4xl mb-4"></i>
                                <p class="text-amber-600 font-semibold">Mapa dos lugares visitados</p>
                                <p class="text-amber-500 text-sm mt-2">4 destinos marcados</p>
                            </div>
                        </div>
                        
                        <!-- Lista de lugares -->
                        <div class="space-y-4">
                            <div class="flex items-center gap-3 p-4 bg-amber-50 rounded-xl hover:bg-amber-100 transition-all cursor-pointer" onclick="showLocationInfo('Urca')">
                                <div class="w-4 h-4 bg-amber-500 rounded-full"></div>
                                <div>
                                    <span class="font-medium">Morro da Urca</span>
                                    <p class="text-xs text-gray-500">P√¥r do sol incr√≠vel</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-4 bg-amber-50 rounded-xl hover:bg-amber-100 transition-all cursor-pointer" onclick="showLocationInfo('Cristo')">
                                <div class="w-4 h-4 bg-amber-500 rounded-full"></div>
                                <div>
                                    <span class="font-medium">Cristo Redentor</span>
                                    <p class="text-xs text-gray-500">Maravilha do Mundo</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-4 bg-amber-50 rounded-xl hover:bg-amber-100 transition-all cursor-pointer" onclick="showLocationInfo('Copacabana')">
                                <div class="w-4 h-4 bg-amber-500 rounded-full"></div>
                                <div>
                                    <span class="font-medium">Copacabana</span>
                                    <p class="text-xs text-gray-500">Praia e bicicleta</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3 p-4 bg-amber-50 rounded-xl hover:bg-amber-100 transition-all cursor-pointer" onclick="showLocationInfo('Lapa')">
                                <div class="w-4 h-4 bg-amber-500 rounded-full"></div>
                                <div>
                                    <span class="font-medium">Lapa</span>
                                    <p class="text-xs text-gray-500">Arcos e m√∫sica</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- Checklist Essencial -->
            <section class="mt-8 bg-white p-10 rounded-[3rem] shadow-xl border border-amber-100 mb-16 relative overflow-hidden">
                <div class="absolute -top-10 -right-10 w-40 h-40 bg-amber-50/30 rounded-full"></div>
                <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-amber-50/30 rounded-full"></div>
                
                <div class="relative z-10">
                    <h2 class="text-3xl font-bold mb-10 text-[#1a2a44] flex items-center gap-3">
                        <i class="fas fa-suitcase-rolling text-amber-500 text-2xl"></i>
                        <span>üéí Checklist Essencial</span>
                    </h2>
                    
                    <div class="mb-8 bg-amber-50/50 rounded-2xl p-6 border border-amber-100">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white">
                                <i class="fas fa-info"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-amber-800">Dica de Viagem</h3>
                                <p class="text-sm text-amber-600">Marque os itens conforme for arrumando as malas!</p>
                            </div>
                        </div>
                        <div class="text-xs text-amber-500 flex items-center gap-2">
                            <i class="fas fa-lightbulb"></i>
                            <span>Progresso: <span id="checklist-progress">0%</span></span>
                        </div>
                    </div>
                    
                    <div id="checklist-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- Estat√≠sticas da Viagem -->
            <section class="mb-20">
                <h2 class="text-3xl font-bold mb-10 text-center text-[#1a2a44]">üìä Estat√≠sticas</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-amber-100 text-center">
                        <div class="text-3xl font-bold text-amber-600 mb-2" id="stats-activities">18</div>
                        <div class="text-sm text-gray-600">Atividades</div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-amber-100 text-center">
                        <div class="text-3xl font-bold text-amber-600 mb-2" id="stats-completed">0</div>
                        <div class="text-sm text-gray-600">Conclu√≠das</div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-amber-100 text-center">
                        <div class="text-3xl font-bold text-amber-600 mb-2" id="stats-photos">0</div>
                        <div class="text-sm text-gray-600">Fotos</div>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-amber-100 text-center">
                        <div class="text-3xl font-bold text-amber-600 mb-2" id="stats-days">3</div>
                        <div class="text-sm text-gray-600">Dias</div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="bg-[#1a2a44] text-white py-20 text-center relative overflow-hidden">
            <div class="absolute inset-0 opacity-5" style="background-image: url('https://images.unsplash.com/photo-1516306580123-e6e52b1b7b5f?q=80&w=2126'); background-size: cover;"></div>
            
            <div class="relative z-10">
                <p class="font-serif-italic text-2xl text-amber-500 mb-6">Uma viagem para recordar sempre!</p>
                <h3 class="text-3xl font-bold mb-8 text-amber-500">Caique & Daniela</h3>
                
                <div class="flex items-center justify-center gap-6 mb-10">
                    <button onclick="shareTrip()" class="w-12 h-12 rounded-full bg-[#E67E22] flex items-center justify-center hover:scale-110 transition-all">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="w-12 h-12 rounded-full bg-[#1a2a44] flex items-center justify-center hover:scale-110 transition-all">
                        <i class="fas fa-home"></i>
                    </button>
                    <button onclick="toggleEdit()" class="w-12 h-12 rounded-full bg-[#F1C40F] flex items-center justify-center hover:scale-110 transition-all">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                
                <p class="opacity-40 text-xs uppercase tracking-[0.4em] mt-12">Rio de Janeiro ‚Ä¢ Janeiro 2026</p>
                <p class="opacity-30 text-[10px] uppercase tracking-widest mt-4">Passaporte Digital de Viagem ‚Ä¢ WebApp PWA</p>
                
                <div class="mt-8 flex justify-center gap-4">
                    <button onclick="exportData()" class="text-xs bg-white/10 px-4 py-2 rounded-full hover:bg-white/20 transition-all">
                        <i class="fas fa-download mr-2"></i>Exportar Dados
                    </button>
                    <button onclick="importData()" class="text-xs bg-white/10 px-4 py-2 rounded-full hover:bg-white/20 transition-all">
                        <i class="fas fa-upload mr-2"></i>Importar
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Service Worker Registration and PWA Script -->
    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript;base64,' + btoa(`
                const CACHE_NAME = 'passaporte-rio-v1';
                const urlsToCache = [
                    '/',
                    '/index.html'
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(cache => cache.addAll(urlsToCache))
                    );
                });

                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request)
                            .then(response => response || fetch(event.request))
                    );
                });
            `)).then(() => {
                console.log('Service Worker registrado com sucesso');
            }).catch(err => {
                console.log('Erro ao registrar Service Worker:', err);
            });
        }

        // PWA Installation
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.classList.remove('hidden');
            
            installBtn.onclick = async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        showNotification('App instalado com sucesso!', 'success');
                        installBtn.classList.add('hidden');
                    }
                    deferredPrompt = null;
                }
            };
        });

        // Offline Detection
        window.addEventListener('online', () => {
            document.getElementById('offline-banner').style.display = 'none';
            showNotification('Conectado √† internet!', 'success');
        });

        window.addEventListener('offline', () => {
            document.getElementById('offline-banner').style.display = 'block';
            showNotification('Modo offline ativado', 'warning');
        });

        // Notification System
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'exclamation-circle'} mr-2"></i>
                ${message}
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>

    <!-- Main Application Script -->
    <script>
        let isEditing = false;
        let activeTab = 'day-06';

        // Dados iniciais
        const defaultData = {
            'day-06': {
                route: "A linha do mapa come√ßa no Hotel e sobe em dire√ß√£o ao P√£o de A√ß√∫car.",
                title: "DIA 06 | A Chegada e o Cora√ß√£o da Urca",
                icon: "fa-plane-arrival",
                activities: [
                    { id: 1, time: "14:00", task: "Check-in", sub: "Hotel / Recep√ß√£o", img: "https://images.trvl-media.com/lodging/16000000/15610000/15605600/15605554/4aa0cfa3.jpg?impolicy=fcrop&w=357&h=201&p=1&q=medium", completed: false, comment: "", rating: 0 },
                    { id: 2, time: "15:00", task: "Almo√ßo: Bar Garota da Urca", sub: "Tradicional Picanha na Chapa", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/dd/a5/97/canja-de-galinha.jpg?w=600&h=-1&s=1", completed: false, comment: "", rating: 0 },
                    { id: 3, time: "16:00", task: "Passeio Local", sub: "Explorar as ruas da Urca", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/22/af/7e/ef/praia-da-urca.jpg?w=1200&h=-1&s=1", completed: false, comment: "", rating: 0 },
                    { id: 4, time: "18:40", task: "P√¥r do sol no Morro da Urca", sub: "Complexo P√£o de A√ß√∫car", img: "https://media.istockphoto.com/id/518232926/photo/the-view-from-the-sugarloaf-mountain.jpg?s=612x612&w=0&k=20&c=KwOpgnNV_bjcWIaR2xcx01CKfGzn8xz9RcCyUHO1hco=", completed: false, comment: "", rating: 0 },
                    { id: 5, time: "20:30", task: "Jantar: Julius Brasserie", sub: "Charme e Gastronomia na Urca", img: "https://media-cdn.tripadvisor.com/media/photo-s/1b/dd/a6/e7/a-famosa-picanha-no-rechaud.jpg", completed: false, comment: "", rating: 0 }
                ]
            },
            'day-07': {
                route: "Atravessando o t√∫nel rumo ao Cristo e Copacabana.",
                title: "DIA 07 | O Cora√ß√£o Tur√≠stico",
                icon: "fa-compass",
                activities: [
                    { id: 6, time: "08:00", task: "Passeio Cristo Redentor", sub: "Maravilha do Mundo", img: "https://as2.ftcdn.net/jpg/03/32/16/31/1000_F_332163103_MeERJCi83wChH0hDhO54yEhGzMpkB3cN.jpg", completed: false, comment: "", rating: 0 },
                    { id: 7, time: "10:00", task: "Bicicleta em Copacabana", sub: "Pedalada no Cal√ßad√£o", img: "https://dynamic-media.tacdn.com/media/photo-o/2e/d5/df/9d/caption.jpg?w=1100&h=800&s=1", completed: false, comment: "", rating: 0 },
                    { id: 8, time: "13:00", task: "Almo√ßo: Samba SKY ou VIZTA", sub: "Vista Panor√¢mica da Orla", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/30/c9/48/de/caption.jpg?w=900&h=500&s=1", completed: false, comment: "", rating: 0 },
                    { id: 9, time: "16:00", task: "Forte de Copacabana", sub: "Hist√≥ria e Caf√© com Vista", img: "https://upload.wikimedia.org/wikipedia/commons/b/b3/Conjunto_Copacabana_-_Rio_de_Janeiro_-_20230911071214.jpg", completed: false, comment: "", rating: 0 },
                    { id: 10, time: "18:40", task: "P√¥r do sol no Arpoador", sub: "Aplaudindo o espet√°culo", img: "https://riomemorias.com.br/wp-content/uploads/2024/11/por-do-sol-no-arpoador.jpg", completed: false, comment: "", rating: 0 },
                    { id: 11, time: "20:30", task: "Jantar: Arp Bar", sub: "P√© na areia sofisticado", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/16/b4/0d/28/hotel-arpoador.jpg?w=700&h=-1&s=1", completed: false, comment: "", rating: 0 }
                ]
            },
            'day-08': {
                route: "Do mar de Copacabana √† boemia da Lapa.",
                title: "DIA 08 | Cultura, Mar e Hist√≥ria",
                icon: "fa-landmark",
                activities: [
                    { id: 12, time: "05:00", task: "Nascer do Sol de Stand Up", sub: "Copacabana Posto 6", img: "https://media-cdn.tripadvisor.com/media/attractions-splice-spp-720x480/13/c7/f8/50.jpg", completed: false, comment: "", rating: 0 },
                    { id: 13, time: "10:00", task: "AquaRio & Museus", sub: "Maior Aqu√°rio da Am√©rica Latina", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2d/00/eb/3e/casal-no-tunel-do-aquario.jpg?w=1200&h=-1&s=1", completed: false, comment: "", rating: 0 },
                    { id: 14, time: "12:00", task: "Roda Gigante Yup Star", sub: "Vista do Porto Maravilha", img: "https://dynamic-media.tacdn.com/media/photo-o/2e/d5/ea/77/caption.jpg?w=1100&h=800&s=1", completed: false, comment: "", rating: 0 },
                    { id: 15, time: "13:30", task: "Almo√ßo: Cais do Oriente", sub: "Ref√∫gio no Centro Hist√≥rico", img: "https://www.rioculturalsecrets.com/wp-content/uploads/2023/10/confeitaria-colombo-rio-de-janeiro.jpg", completed: false, comment: "", rating: 0 },
                    { id: 16, time: "15:00", task: "Biblioteca & Real Gabinete", sub: "Gabinete Portugu√™s de Leitura", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/2a/95/e8/interior-of-the-portuguese.jpg?w=900&h=500&s=1", completed: false, comment: "", rating: 0 },
                    { id: 17, time: "16:30", task: "Arcos da Lapa & Selar√≥n", sub: "Escadaria mais famosa do mundo", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/18/23/e8/81/escadaria-selaron.jpg?w=900&h=500&s=1", completed: false, comment: "", rating: 0 },
                    { id: 18, time: "21:00", task: "Jantar: Rio Scenarium", sub: "Cultura e M√∫sica na Lapa", img: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0b/fd/76/fd/decoracao-linda.jpg?w=600&h=400&s=1", completed: false, comment: "", rating: 0 }
                ]
            }
        };

        // Carregar dados do Local Storage
        let itinerary = JSON.parse(localStorage.getItem('rio-passport-final')) || defaultData;
        let checklistItems = JSON.parse(localStorage.getItem('rio-checklist-final')) || [
            { t: "Protetor solar e √≥culos", c: false, icon: "fa-sun" }, 
            { t: "Power Bank", c: false, icon: "fa-battery-full" }, 
            { t: "Documento com foto", c: false, icon: "fa-id-card" }, 
            { t: "Garrafa d'√°gua", c: false, icon: "fa-wine-bottle" },
            { t: "C√¢mera fotogr√°fica", c: false, icon: "fa-camera" },
            { t: "Roupas de banho", c: false, icon: "fa-umbrella-beach" },
            { t: "T√™nis confort√°vel", c: false, icon: "fa-shoe-prints" },
            { t: "Carregador port√°til", c: false, icon: "fa-plug" }
        ];

        // Sistema de Mem√≥rias
        let memories = JSON.parse(localStorage.getItem('rio-memories')) || [];
        let travelDiary = localStorage.getItem('rio-diary') || "";

        // Fun√ß√µes Principais
        function openPassport() {
            document.getElementById('passport-cover').classList.add('rotate-y-open');
            document.getElementById('passport-overlay').classList.add('opacity-0');
            setTimeout(() => {
                document.getElementById('passport-overlay').style.display = 'none';
                document.getElementById('main-app').classList.replace('hidden', 'block');
                setTimeout(() => document.getElementById('main-app').classList.remove('opacity-0'), 100);
                render();
            }, 800);
        }

        function switchTab(id) {
            activeTab = id;
            document.querySelectorAll('#tab-list button').forEach(b => b.classList.replace('tab-active', 'text-gray-400'));
            document.getElementById('tab-' + id.split('-')[1]).classList.add('tab-active');
            render();
        }

        function toggleEdit() {
            isEditing = !isEditing;
            document.getElementById('edit-btn').innerHTML = isEditing ? 
                '<i class="fas fa-save mr-2"></i>Salvar' : 
                '<i class="fas fa-edit mr-2"></i>Editar';
            render();
        }

        function updateData(id, field, value) {
            itinerary[activeTab].activities.find(a => a.id === id)[field] = value;
            localStorage.setItem('rio-passport-final', JSON.stringify(itinerary));
            updateStats();
        }

        function removeActivity(id) {
            if (confirm("Tem certeza que deseja remover esta atividade?")) {
                const dayActivities = itinerary[activeTab].activities;
                itinerary[activeTab].activities = dayActivities.filter(activity => activity.id !== id);
                localStorage.setItem('rio-passport-final', JSON.stringify(itinerary));
                render();
            }
        }

        // Sistema de Mem√≥rias
        function addMemoryPhoto(input) {
            const file = input.files[0];
            if (file && file.type.startsWith('image/')) {
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    showNotification('Imagem muito grande (m√°x. 5MB)', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const memory = {
                        id: Date.now(),
                        src: e.target.result,
                        date: new Date().toLocaleDateString('pt-BR'),
                        caption: '',
                        location: 'Rio de Janeiro'
                    };
                    memories.push(memory);
                    localStorage.setItem('rio-memories', JSON.stringify(memories));
                    renderMemories();
                    showNotification('Foto adicionada √†s mem√≥rias!', 'success');
                };
                reader.readAsDataURL(file);
            } else {
                showNotification('Por favor, selecione uma imagem v√°lida', 'error');
            }
            input.value = ''; // Reset input
        }

        function deleteMemory(id) {
            if (confirm("Remover esta foto das mem√≥rias?")) {
                memories = memories.filter(m => m.id !== id);
                localStorage.setItem('rio-memories', JSON.stringify(memories));
                renderMemories();
                showNotification('Foto removida', 'success');
            }
        }

        function renderMemories() {
            const gallery = document.getElementById('memories-gallery');
            if (memories.length === 0) {
                gallery.innerHTML = `
                    <div class="col-span-2 md:col-span-4 text-center py-8">
                        <i class="fas fa-images text-amber-300 text-4xl mb-4"></i>
                        <p class="text-amber-600 font-semibold">Nenhuma foto ainda</p>
                        <p class="text-amber-500 text-sm">Adicione suas fotos clicando no bot√£o acima</p>
                    </div>
                `;
            } else {
                gallery.innerHTML = memories.slice(-8).reverse().map(mem => `
                    <div class="relative group memory-img">
                        <img src="${mem.src}" class="w-full h-48 object-cover rounded-2xl shadow-lg">
                        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl flex flex-col items-center justify-center p-4">
                            <p class="text-white text-xs mb-2">${mem.date}</p>
                            <button onclick="deleteMemory(${mem.id})" class="bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-all">
                                <i class="fas fa-trash text-xs"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            updateStats();
        }

        // Di√°rio da Viagem
        function saveDiary() {
            travelDiary = document.getElementById('travel-diary').value;
            localStorage.setItem('rio-diary', travelDiary);
            showNotification('Di√°rio salvo com sucesso!', 'success');
        }

        // Sistema de Estat√≠sticas
        function updateStats() {
            // Total de atividades
            let totalActivities = 0;
            let completedActivities = 0;
            
            Object.values(itinerary).forEach(day => {
                totalActivities += day.activities.length;
                completedActivities += day.activities.filter(a => a.completed).length;
            });
            
            document.getElementById('stats-activities').textContent = totalActivities;
            document.getElementById('stats-completed').textContent = completedActivities;
            document.getElementById('stats-photos').textContent = memories.length;
            document.getElementById('stats-days').textContent = Object.keys(itinerary).length;
        }

        // Fun√ß√µes Auxiliares
        function renderStars(id, rating) {
            let html = '';
            for (let i = 1; i <= 5; i++) {
                html += `<span onclick="updateData(${id}, 'rating', ${i}); render();" class="cursor-pointer text-lg ${i <= rating ? 'star-active' : 'star-inactive'} transition-transform hover:scale-125">‚òÖ</span>`;
            }
            return html;
        }

        function updateChecklistProgress() {
            const completed = checklistItems.filter(item => item.c).length;
            const total = checklistItems.length;
            const progress = Math.round((completed / total) * 100);
            document.getElementById('checklist-progress').textContent = `${progress}%`;
        }

        function showLocationInfo(location) {
            const info = {
                'Urca': 'O bairro mais seguro do Rio, com o famoso P√£o de A√ß√∫car.',
                'Cristo': 'Uma das 7 Maravilhas do Mundo Moderno, a 710m de altura.',
                'Copacabana': 'Praia mais famosa do mundo, com 4km de extens√£o.',
                'Lapa': 'Centro da vida noturna carioca, famosa pelos Arcos e bares.'
            };
            alert(`üìç ${location}\n\n${info[location]}`);
        }

        // Compartilhamento
        function shareTrip() {
            if (navigator.share) {
                navigator.share({
                    title: 'Nossa Viagem ao Rio! ‚úàÔ∏è',
                    text: 'Confira nosso passaporte digital da viagem ao Rio de Janeiro!',
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href)
                    .then(() => showNotification('Link copiado! Compartilhe com amigos!', 'success'))
                    .catch(() => showNotification('Erro ao copiar link', 'error'));
            }
        }

        // Exportar/Importar Dados
        function exportData() {
            const allData = {
                itinerary: itinerary,
                checklist: checklistItems,
                memories: memories,
                diary: travelDiary,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `passaporte-rio-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Dados exportados com sucesso!', 'success');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        
                        if (confirm('Importar dados? Isso sobrescrever√° seus dados atuais.')) {
                            if (importedData.itinerary) itinerary = importedData.itinerary;
                            if (importedData.checklist) checklistItems = importedData.checklist;
                            if (importedData.memories) memories = importedData.memories;
                            if (importedData.diary) travelDiary = importedData.diary;
                            
                            localStorage.setItem('rio-passport-final', JSON.stringify(itinerary));
                            localStorage.setItem('rio-checklist-final', JSON.stringify(checklistItems));
                            localStorage.setItem('rio-memories', JSON.stringify(memories));
                            localStorage.setItem('rio-diary', travelDiary);
                            
                            render();
                            showNotification('Dados importados com sucesso!', 'success');
                        }
                    } catch (err) {
                        showNotification('Erro ao importar dados: arquivo inv√°lido', 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Renderiza√ß√£o Principal
        function render() {
            const container = document.getElementById('day-container');
            const day = itinerary[activeTab];

            let html = `
                <div class="flex items-center gap-6 mb-12 card-enter bg-white p-8 rounded-[2.5rem] shadow-xl border border-amber-100">
                    <div class="bg-[#E67E22] text-white w-16 h-16 flex items-center justify-center rounded-2xl font-bold text-2xl shadow-xl">
                        <i class="fas ${day.icon || 'fa-calendar-day'}"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="text-3xl font-extrabold text-[#1A2A44] leading-tight mb-2">${day.title}</h3>
                        <p class="text-gray-500 font-serif-italic flex items-center gap-2">
                            <i class="fas fa-route text-amber-500"></i>
                            ${day.route}
                        </p>
                    </div>
                    <div class="hidden md:block">
                        <div class="text-xs text-gray-400 uppercase tracking-widest mb-2">Progresso do Dia</div>
                        <div class="w-48 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-amber-500 rounded-full" style="width: ${(day.activities.filter(a => a.completed).length / day.activities.length) * 100}%"></div>
                        </div>
                    </div>
                </div>
                <div class="relative dot-line pl-12 space-y-10">
                    <div class="absolute left-[13px] top-6 w-6 h-6 bg-amber-500 border-4 border-white rounded-full z-10 shadow-lg flex items-center justify-center">
                        <div class="w-2 h-2 bg-white rounded-full"></div>
                    </div>
            `;

            day.activities.forEach((act, index) => {
                const isDefaultActivity = act.id <= 18;
                
                html += `
                <div class="bg-white p-8 rounded-[2.5rem] shadow-lg border border-amber-100 flex flex-col md:flex-row gap-8 card-enter relative">
                    
                    ${isEditing && !isDefaultActivity ? `
                    <button onclick="removeActivity(${act.id})" class="remove-btn absolute -top-3 -right-3 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 transition-all z-20">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                    ` : ''}
                    
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-4">
                                ${isEditing ? 
                                    `<input onchange="updateData(${act.id}, 'time', this.value)" class="text-[#E67E22] font-bold text-lg w-20 bg-amber-50 rounded-xl px-3 py-1 text-center" value="${act.time}">` : 
                                    `<div class="bg-amber-50 text-[#E67E22] font-bold text-lg rounded-xl px-4 py-2 shadow-inner">${act.time}</div>`
                                }
                                <button onclick="updateData(${act.id}, 'completed', ${!act.completed}); render();" class="w-8 h-8 rounded-full flex items-center justify-center ${act.completed ? 'bg-green-500 text-white shadow-lg' : 'bg-gray-100 border-2 border-gray-300'} transition-all hover:scale-110">
                                    ${act.completed ? '<i class="fas fa-check text-xs"></i>' : ''}
                                </button>
                            </div>
                            <div class="flex gap-1">${renderStars(act.id, act.rating)}</div>
                        </div>
                        ${isEditing ? 
                            `<input onchange="updateData(${act.id}, 'task', this.value)" class="text-2xl font-bold text-[#1A2A44] w-full border-b-2 border-amber-200 mb-2 outline-none pb-2" value="${act.task}">` : 
                            `<h4 class="text-2xl font-bold ${act.completed ? 'opacity-40 line-through' : 'text-[#1A2A44]'}">${act.task}</h4>`
                        }
                        <p class="text-gray-500 text-sm uppercase font-semibold tracking-widest mb-6 flex items-center gap-2">
                            <i class="fas fa-map-marker-alt text-amber-500"></i>
                            ${act.sub}
                        </p>
                        <div class="${act.completed ? 'block' : 'hidden'} card-enter mt-6">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-comment text-amber-500"></i>
                                <span class="text-sm font-semibold text-amber-700">Seu coment√°rio:</span>
                            </div>
                            <textarea onchange="updateData(${act.id}, 'comment', this.value)" class="w-full text-sm p-4 bg-amber-50/50 rounded-2xl border border-amber-200 focus:border-amber-400 outline-none transition-all" placeholder="O que achou desse lugar? Anote suas impress√µes...">${act.comment}</textarea>
                        </div>
                    </div>
                    
                    ${act.img ? `
                    <div class="w-full md:w-56 h-48 rounded-3xl overflow-hidden relative group shadow-xl">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        <img src="${act.img}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        ${isEditing ? 
                            `<label class="absolute inset-0 bg-black/60 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer z-20 text-white p-4">
                                <i class="fas fa-camera-retro text-2xl mb-2"></i>
                                <span class="text-xs font-bold uppercase">Trocar Foto</span>
                                <input type="file" class="hidden" onchange="const f=this.files[0]; const r=new FileReader(); r.onload=e=>{updateData(${act.id},'img',e.target.result);render()}; f&&r.readAsDataURL(f)">
                            </label>` : 
                            `<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity z-20">
                                <div class="flex items-center justify-between">
                                    <span>Parada ${index + 1}</span>
                                    <span>${act.completed ? '‚úì Conclu√≠do' : '‚¨§ Pendente'}</span>
                                </div>
                            </div>`
                        }
                    </div>
                    ` : `
                    <div class="w-full md:w-56 h-48 rounded-3xl bg-amber-50 border-2 border-dashed border-amber-200 flex flex-col items-center justify-center relative group transition-all hover:border-amber-400">
                        <i class="fas fa-image text-amber-300 text-4xl mb-3"></i>
                        <p class="text-amber-400 text-sm font-semibold mb-1">Sem foto ainda</p>
                        <p class="text-amber-300 text-xs">Adicione uma imagem</p>
                        ${isEditing ? 
                            `<label class="absolute inset-0 flex flex-col items-center justify-center cursor-pointer bg-amber-50/70 opacity-0 group-hover:opacity-100 transition-opacity rounded-3xl">
                                <i class="fas fa-plus-circle text-amber-500 text-2xl mb-2"></i>
                                <span class="text-xs font-bold text-amber-600 uppercase">Adicionar Foto</span>
                                <input type="file" class="hidden" onchange="const f=this.files[0]; const r=new FileReader(); r.onload=e=>{updateData(${act.id},'img',e.target.result);render()}; f&&r.readAsDataURL(f)">
                            </label>` : 
                            ''
                        }
                    </div>
                    `}
                </div>`;
            });

            if(isEditing) {
                html += `
                <div class="flex flex-col md:flex-row gap-4">
                    <button onclick="const id=Date.now(); itinerary[activeTab].activities.push({id, time:'00:00', task:'Nova Atividade', sub:'Local', img:null, completed:false, rating:0, comment:''}); render();" class="flex-1 py-6 border-2 border-dashed border-amber-300 rounded-[2.5rem] text-amber-600 font-bold hover:bg-amber-50 transition-all flex flex-col items-center gap-2">
                        <i class="fas fa-plus-circle text-2xl"></i>
                        <span>Adicionar Nova Atividade</span>
                    </button>
                    
                    ${day.activities.length > 1 ? `
                    <button onclick="if(confirm('Remover TODAS as atividades adicionadas deste dia?')) { itinerary[activeTab].activities = itinerary[activeTab].activities.filter(a => a.id <= 18); render(); }" class="md:w-1/4 py-6 border-2 border-dashed border-red-300 rounded-[2.5rem] text-red-500 font-bold hover:bg-red-50 transition-all flex flex-col items-center gap-2">
                        <i class="fas fa-trash-alt text-xl"></i>
                        <span class="text-sm">Limpar Adicionadas</span>
                    </button>
                    ` : ''}
                </div>`;
            }
                
            container.innerHTML = html + `</div>`;

            // Render checklist
            const checklistGrid = document.getElementById('checklist-grid');
            checklistGrid.innerHTML = checklistItems.map((item, idx) => `
                <div onclick="checklistItems[${idx}].c = !checklistItems[${idx}].c; localStorage.setItem('rio-checklist-final', JSON.stringify(checklistItems)); render();" class="flex items-center gap-4 p-5 rounded-2xl border-2 transition-all cursor-pointer ripple ${item.c ? 'bg-green-50 border-green-200 shadow-sm' : 'bg-white border-amber-100 hover:border-amber-300 hover:shadow-md'}">
                    <div class="w-10 h-10 rounded-full ${item.c ? 'bg-green-500' : 'bg-amber-100'} flex items-center justify-center ${item.c ? 'text-white' : 'text-amber-600'} transition-all">
                        <i class="fas ${item.icon || 'fa-check'} ${item.c ? 'text-xs' : ''}"></i>
                    </div>
                    <div class="flex-1">
                        <span class="text-sm font-medium ${item.c ? 'text-green-700 line-through' : 'text-gray-700'}">${item.t}</span>
                        <div class="flex items-center gap-2 mt-1">
                            <div class="w-full h-1 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full ${item.c ? 'bg-green-500' : 'bg-amber-200'} rounded-full" style="width: ${item.c ? '100%' : '0%'}"></div>
                            </div>
                            <span class="text-[10px] ${item.c ? 'text-green-600' : 'text-amber-500'} font-bold">${item.c ? 'PRONTO' : 'PENDENTE'}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            // Render mem√≥rias
            renderMemories();
            
            // Carregar di√°rio
            document.getElementById('travel-diary').value = travelDiary;
            
            // Atualizar estat√≠sticas e progresso
            updateChecklistProgress();
            updateStats();
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Carregar di√°rio do Local Storage
            travelDiary = localStorage.getItem('rio-diary') || "";
            
            // Configurar autosave do di√°rio
            const diaryTextarea = document.getElementById('travel-diary');
            if (diaryTextarea) {
                diaryTextarea.value = travelDiary;
                diaryTextarea.addEventListener('input', function() {
                    travelDiary = this.value;
                    localStorage.setItem('rio-diary', travelDiary);
                });
            }
            
            // Verificar se est√° rodando como PWA
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('Rodando como PWA instalado');
            }
            
            // Inicializar offline detection
            if (!navigator.onLine) {
                document.getElementById('offline-banner').style.display = 'block';
            }
        });

        // Render inicial
        render();
    </script>
</body>
</html>